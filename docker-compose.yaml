version: "3"

services:
    mysql:
        container_name: mysql
        image: mysql:5.7
        ports:
          - 3306:3306
        environment:
          MYSQL_DATABASE: recofashion
          MYSQL_ROOT_PASSWORD: dkdltm123
          MYSQL_ROOT_HOST: '%'
        volumes:
          - /recofashion/db:/var/lib/mysql

    server:
        container_name: recofashion_server
        image: recofashion/server
        ports:
          - 5000:8080
        depends_on:
          - mysql
        environment:
          SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/recofashion?serverTimezone=UTC&characterEncoding=UTF-8
          DEPLOY_HOST: http://192.168.137.120

    client:
        container_name: recofashion_client
        image: recofashion/client
        ports:
          - 81:80
        depends_on:
          - server
        environment:
          NODE_ENV: production
